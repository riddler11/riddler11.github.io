<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Punch-in Statistics System for “Xuexi Qiangguo” | Leo&#39;s Blog</title>
<link rel="shortcut icon" href="https://riddler11.github.io/favicon.ico?v=1634185974845">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://riddler11.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Punch-in Statistics System for “Xuexi Qiangguo” | Leo&#39;s Blog - Atom Feed" href="https://riddler11.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="The project is purely software
At present, the drilling of learning ability is realized in the form of ** website **. It..." />
    <meta name="keywords" content="javaweb" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://riddler11.github.io">
  <img class="avatar" src="https://riddler11.github.io/images/avatar.png?v=1634185974845" alt="">
  </a>
  <h1 class="site-title">
    Leo&#39;s Blog
  </h1>
  <p class="site-description">
    It's what you do in the dark, that puts you in the light.
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          Home
        </a>
      
    
      
        <a href="/archives" class="menu">
          Archives
        </a>
      
    
      
        <a href="/tags" class="menu">
          Tags
        </a>
      
    
      
        <a href="/post/about" class="menu">
          about
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Punch-in Statistics System for “Xuexi Qiangguo”
            </h2>
            <div class="post-info">
              <span>
                2020-11-03
              </span>
              <span>
                8 min read
              </span>
              
                <a href="https://riddler11.github.io/tag/6VBb7iLP0/" class="post-tag">
                  # javaweb
                </a>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <h2 id="the-project-is-purely-software">The project is purely software</h2>
<p>At present, the drilling of learning ability is realized in the form of ** website **. Its original design purpose is to improve the accuracy of statistics and facilitate the students on duty to watch the clock in every day, thus producing the idea of making this system. It has been put into use</p>
<h2 id="system-architecture">System architecture</h2>
<p>The system architecture is expanded based on MVC development mode, including database data layer, model layer, Dao data persistence layer, service business logic layer and controller / servlet controller. The division of labor at each level is clear and the coupling degree of levels is reduced.</p>
<h4 id="view-layer">View layer</h4>
<p>The system adopts B / S mode. Most display pages are JSP / HTML. In order to meet the display of page UI, ajax data exchange is in JSON format. This layer is closely combined with the control layer, and they need to work together.</p>
<h2 id="controller-layer">Controller layer</h2>
<p>The controller layer is responsible for the control of specific business module processes, which not only makes the program structure clear, but also greatly reduces the amount of code.<br>
The control layer is mainly used to respond to client requests. Whenever a request is sent to the system, the control layer will call the corresponding business logic. There are many kinds of requests, such as ajax data request, page request, file upload and file download. The control layer will make corresponding data return, page Jump and stream return.</p>
<h2 id="data-persistence-layer">Data persistence layer</h2>
<p>The Dao layer mainly does the work of the data persistence layer, and some tasks responsible for contacting the database are encapsulated here. The design of the Dao layer first designs the Dao interface, and then designs the implementation class.</p>
<h2 id="contact-of-each-layer">Contact of each layer</h2>
<p>The Dao layer can be developed independently with low mutual coupling, and can be carried out independently. Such a mode has particular advantages in the process of developing large projects. The controller and view layers need to be developed together because of their high coupling, but they can also be developed as a whole independent of the first two layers. In this way, we only need to know the definition of the interface between layers, and call the interface to complete the required logical unit application. Everything is very clear and simple.</p>
<h4 id="the-following-figure-shows-the-current-website-functional-architecture">The following figure shows the current website functional architecture</h4>
<figure data-type="image" tabindex="1"><img src="https://upload-images.jianshu.io/upload_images/24469819-6922a2d72dee42ba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Current website architecture" loading="lazy"></figure>
<figure data-type="image" tabindex="2"><img src="https://upload-images.jianshu.io/upload_images/24469819-2d3437085ecd86cb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Effect drawing of login interface" loading="lazy"></figure>
<p><a href="https://gitee.com/riddler11/clock-in?_from=gitee_search">Gitee download address, click here directly</a>，This code is still the code with * * bug * * before. Understanding the code and making corresponding modifications will make great progress.</p>
<p><strong>The code here is developed using the following software</strong>：Development tool：MyEclipse10，Database：MySQL 5.1.32-community，Graphical interface database operation：navicat，Java environment：jdk1.8.0_131.</p>
<p><strong>Later, I used eclipse to develop</strong>，When JDK6 is changed to a higher version in MyEclipse, some errors will occur in MyEclipse. There is no file class requested by image processing. Anyway, if two jdk version exist, it will causing some code bugs; Like not executing identification codes or something.</p>
<h5 id="bug-in-the-orignal-project">Bug in the orignal project</h5>
<ul>
<li>The number of clocking days is increased to 100 when it reaches 99 days, and the data of 99 days is checked and modified all the time.</li>
</ul>
<h5 id="the-process-and-realization-of-clock-in-days">The process and Realization of clock in days</h5>
<ul>
<li>In the point entry interface, fill in the scores, or upload pictures for identification. After there is content in the input box, click upload, and the clock in days will increase automatically.</li>
<li>The personal design is realized by comparing the time. The registration time will be automatically recorded during registration, and then the clock in days will be calculated by comparing with the registration time.</li>
</ul>
<p>Three cases：</p>
<ol>
<li>Clock in on the day of registration</li>
<li>Didn't clock in on the day of registration</li>
<li>Clock in after registration</li>
</ol>
<ul>
<li>The details should be combined with the code</li>
</ul>
<p>The reason for the bug is when designing the database，The data type is varchar(255), And then on day 99, The code always judges 99 as the maximum number of days. My personal idea to solve this bug is(Judge the latest clock in number, because the clock in number increases automatically and the data type is int).When I write here, I suddenly remember that the number of branch days seems to be of varchar type. I'll change this when I'm free.<br>
<img src="https://upload-images.jianshu.io/upload_images/24469819-acab8586da67e47e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="mood" loading="lazy"></p>
<figure data-type="image" tabindex="3"><img src="https://upload-images.jianshu.io/upload_images/24469819-4a86633ca9568bbd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Points entry interface" loading="lazy"></figure>
<h2 id="when-the-project-is-uploaded-to-the-server-and-run-the-bugs-are-more-interesting">When the project is uploaded to the server and run, the bugs are more interesting.</h2>
<ol>
<li>
<p>No problem with local database entry. But when the server uploads Chinese into the database, it is garbled.（Add <strong>useunicode = true &amp; characterencoding = UTF-8</strong> in <strong>db.properties</strong> to solve the problem）<a href="https://blog.csdn.net/weixin_30765577/article/details/99580949?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param">Problem solving link</a></p>
</li>
<li>
<p>The JDK of Tomcat 7 version is only 1.7. The algorithms of image processing cannot be used. As shown in the figure, an error will be reported<br>
<img src="https://upload-images.jianshu.io/upload_images/24469819-3af03fc398c40a1d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Request error graph" loading="lazy"></p>
</li>
<li>
<p>The tomacat 8 version is finally ready for JDK1.8, and the feelings entered in the result are all  <em>？？？？？</em>（garbled），Check the data on the Internet and find that tomcat8 can directly help you deal with the problem of characters. It defaults to UTF-8. My method transcodes the tomcat7 version into iso-8859-1. In order not to cause great changes, I changed the code to ISO-8859-1。<a href="https://blog.csdn.net/lzl_avery/article/details/87348937">Problem solving link</a></p>
</li>
</ol>
<p>4.The best bug is nothing more than this. I developed this project using the windows operating system. The storage directory path is shown as the forward slash“\”<br>
<img src="https://upload-images.jianshu.io/upload_images/24469819-436ab64fdf7dd4cc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Storage directory path" loading="lazy"><br>
However, the actual server is a Linux system. Let's take a look at the server without changing the code（See the figure below） <em>img\学号\图片名</em> (Surprise, it has created a strange folder that can't be accessed yet). Next, let's look at the actual storage path of the server. As shown in the figure, the backslash &quot;/&quot; is used for storage.As a result, storage problems arise，<strong>The solution is to change the forward slash to the backslash</strong><br>
<img src="https://upload-images.jianshu.io/upload_images/24469819-94d96b7c79c9536e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Do not change the path of code storage diagram" loading="lazy"><br>
<img src="https://upload-images.jianshu.io/upload_images/24469819-9b26d297b5569c41.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Server storage path" loading="lazy"></p>
<h2 id="places-to-be-promoted">Places to be promoted</h2>
<p>In the points interface, you can add * * number of days to punch * * to compare with the actual number of days to punch.In fact, I wrote this part of the code method myself, but there were a few small problems when I actually wrote it on the front end, and I don't have time to solve them yet.<br>
<img src="https://upload-images.jianshu.io/upload_images/24469819-e43088944d0c82e8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Integral interface diagram" loading="lazy"></p>
<p>This website can actually be converted into ** wechat applet ** to clock in，Capable students or students who want to have this ability can learn from the database structure and code written by my back-end and use them to achieve.<br>
<strong>Genius can be ignored and developed directly on demand.</strong></p>
<p>I implement image processing here by using the API provided by others. Low recognition rate is a problem<strong>This is also the knowledge what I lack</strong></p>
<p>** You can add functions such as meeting sign in**. Make the software more rich and humanized</p>
<h5 id="finally-i-attached-the-supply-and-demand-analysis-of-the-small-program-i-wanted-to-make-at-that-time">Finally, I attached the supply and demand analysis of the small program I wanted to make at that time</h5>
<figure data-type="image" tabindex="4"><img src="https://upload-images.jianshu.io/upload_images/24469819-bd9045e5556cb842.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="微信小程序版" loading="lazy"></figure>
<p>The above is written on November 3, 2020. If there is any supplement, follow up<br>
<img src="https://upload-images.jianshu.io/upload_images/24469819-acab8586da67e47e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="" loading="lazy"></p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#the-project-is-purely-software">The project is purely software</a></li>
<li><a href="#system-architecture">System architecture</a><br>
*
<ul>
<li><a href="#view-layer">View layer</a></li>
</ul>
</li>
<li><a href="#controller-layer">Controller layer</a></li>
<li><a href="#data-persistence-layer">Data persistence layer</a></li>
<li><a href="#contact-of-each-layer">Contact of each layer</a><br>
*
<ul>
<li><a href="#the-following-figure-shows-the-current-website-functional-architecture">The following figure shows the current website functional architecture</a>
<ul>
<li><a href="#bug-in-the-orignal-project">Bug in the orignal project</a></li>
<li><a href="#the-process-and-realization-of-clock-in-days">The process and Realization of clock in days</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#when-the-project-is-uploaded-to-the-server-and-run-the-bugs-are-more-interesting">When the project is uploaded to the server and run, the bugs are more interesting.</a></li>
<li><a href="#places-to-be-promoted">Places to be promoted</a><br>
*<br>
*<br>
* <a href="#finally-i-attached-the-supply-and-demand-analysis-of-the-small-program-i-wanted-to-make-at-that-time">Finally, I attached the supply and demand analysis of the small program I wanted to make at that time</a></li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://riddler11.github.io/post/esp8266-yuan-cheng-kong-zhi-tai-deng/">
              <h3 class="post-title">
                Remote control desk lamp based on ESP8266
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  
  <a class="rss" href="https://riddler11.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
